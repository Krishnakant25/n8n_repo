{
  "name": "Restaurant Customer Support & Booking Support",
  "nodes": [
    {
      "parameters": {
        "public": true,
        "mode": "webhook",
        "options": {
          "responseMode": "responseNode"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        0,
        0
      ],
      "id": "eccc16be-ac57-4e40-8800-1fd10958bf6a",
      "name": "When chat message received",
      "webhookId": "94db3b79-6205-4156-a40a-02eb96fce0a0"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "=**ROLE**\nYour name is Rachel, you are a customer support agent for an Italian Restaurant called Bella Vista.\n\nYou are responsible for providing information about the restaurant using the knowledge base system. \n\nPlease ensure your communication style is friendly and to the point.\n\n**TOOLS**\n\nWhen a customer want to make a booking follow these steps.\n\ncollect essentials details: customer name, email address, party size, preferred date & time and any special requests they may have.\n\nLet the customer know their booking request has been submitted to the restaurant and they will receive a confirmation shortly.\n\nWhen a customer wants to speak to a person get there name, email or phone number, use the Human support tool to send their details. Tell them there request has been submitted and they will be contacted soon. "
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        208,
        0
      ],
      "id": "729d0faa-3aa1-48c6-874b-d590b9ea0408",
      "name": "Rachel"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        80,
        208
      ],
      "id": "afaf2d74-fbeb-4954-b3b8-e253151b003c",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "uIxJ2FCooS9mxcV0",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.embeddingsGoogleGemini",
      "typeVersion": 1,
      "position": [
        272,
        448
      ],
      "id": "d4bc9e72-05d0-449d-87e5-eb8a56ad6caa",
      "name": "Embeddings Google Gemini",
      "credentials": {
        "googlePalmApi": {
          "id": "uIxJ2FCooS9mxcV0",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "krishnakantnew14@gmail.com",
        "subject": "New Booking",
        "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}",
        "options": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.gmailTool",
      "typeVersion": 2.1,
      "position": [
        752,
        256
      ],
      "id": "e4c9e887-62b1-4e55-8619-b8ce64c9f645",
      "name": "Make Bookings",
      "webhookId": "b12b42c4-7a4b-4721-94f1-6f8dc27bf541",
      "credentials": {
        "gmailOAuth2": {
          "id": "9tiYBVDSjm7FI62h",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "kiritoisme25@gmail.com",
        "subject": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Subject', ``, 'string') }}",
        "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}",
        "options": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.gmailTool",
      "typeVersion": 2.1,
      "position": [
        560,
        256
      ],
      "id": "20e58763-8d4d-4dbb-b237-45b2566bfdef",
      "name": "Human Support",
      "webhookId": "40820973-11aa-4381-a7b5-a85968873b5e",
      "credentials": {
        "gmailOAuth2": {
          "id": "9tiYBVDSjm7FI62h",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        144,
        384
      ],
      "id": "2e41b500-b3b5-428a-b79a-d450ceeb95c1",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "eCObayQ9qmOjMM1H",
          "name": "Postgres account 3"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "Use this tool to fetch the documents related to the restaurant's knowledge base ",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePGVector",
      "typeVersion": 1.3,
      "position": [
        272,
        288
      ],
      "id": "a5e5c970-5bb9-402a-b263-49f80028aff2",
      "name": "Postgres PGVector Store",
      "credentials": {
        "postgres": {
          "id": "eCObayQ9qmOjMM1H",
          "name": "Postgres account 3"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "Rachel",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Rachel",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Google Gemini": {
      "ai_embedding": [
        [
          {
            "node": "Postgres PGVector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Make Bookings": {
      "ai_tool": [
        [
          {
            "node": "Rachel",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Human Support": {
      "ai_tool": [
        [
          {
            "node": "Rachel",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "Rachel",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Postgres PGVector Store": {
      "ai_tool": [
        [
          {
            "node": "Rachel",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "ef54a54d-34fd-438a-83c5-2da3f8c2f9f3",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "80506d3448078bcf0bb2e0bcf69531cdc076409df54bd01c6e846b8a70b9afaa"
  },
  "id": "ta5sVavbpJrBCJL0",
  "tags": []
}